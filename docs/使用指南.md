# 🎵 音乐下载助手 - 使用指南

## 快速开始

### 1. 启动服务

**开发模式（推荐）：**
```bash
npm run dev
```

**生产模式：**
```bash
npm run build
npm start
```

服务启动后，访问 `http://localhost:3000`

### 2. 使用流程

#### 步骤一：搜索歌单
1. 在搜索框输入歌单名称（例如："周杰伦"、"欧美经典"、"华语流行"）
2. 点击"搜索"按钮或按回车键
3. 等待搜索结果显示

#### 步骤二：选择歌单
1. 浏览搜索结果中的歌单卡片
2. 点击任意歌单卡片进入详情页
3. 查看歌单封面、创建者、描述等信息

#### 步骤三：选择歌曲
1. 在歌单详情页查看完整歌曲列表
2. 勾选想要下载的歌曲（可以使用"全选"/"取消全选"快捷操作）
3. 观察右上角的选中计数

#### 步骤四：批量下载
1. 点击"批量下载选中歌曲"按钮
2. 浏览器会逐个下载选中的歌曲
3. 下载进度和日志会实时显示在页面下方

## 功能特性

### ✨ 核心功能
- **搜索歌单**：支持关键词搜索网易云音乐的歌单
- **浏览歌曲**：查看歌单详情和完整歌曲列表
- **批量下载**：一键下载多首歌曲，无需逐个操作

### 🎨 界面特性
- 现代简约的设计风格
- 流畅的动画效果
- 响应式布局（支持手机、平板、电脑）
- 实时下载进度显示

### 🛠 技术特性
- 基于网易云音乐官方API
- 支持批量获取歌曲URL
- 自动清理文件名非法字符
- 详细的下载日志记录

## 常见问题

### Q1: 为什么有些歌曲显示"无法获取下载链接"？
**A:** 部分歌曲可能需要VIP权限，或者因版权原因无法下载。这是网易云音乐API的限制，建议选择其他歌曲。

### Q2: 下载的文件保存在哪里？
**A:** 文件会保存到浏览器的默认下载目录，通常是：
- Windows: `C:\Users\用户名\Downloads`
- macOS: `/Users/用户名/Downloads`
- Linux: `/home/用户名/Downloads`

### Q3: 可以同时下载多少首歌？
**A:** 理论上没有限制，但建议每次下载不超过50首，避免浏览器卡顿。

### Q4: 下载速度慢怎么办？
**A:** 下载速度取决于：
1. 网易云服务器的响应速度
2. 你的网络带宽
3. 浏览器的下载限制

建议分批下载，不要一次选择太多歌曲。

### Q5: 为什么搜索不到某些歌单？
**A:** 可能的原因：
1. 歌单名称拼写错误
2. 歌单已被删除或设为私密
3. 网易云API的搜索结果有限制

尝试换个关键词重新搜索。

## 注意事项

⚠️ **重要提示**

1. **仅供学习交流使用**：请勿用于商业用途或侵犯版权
2. **支持正版音乐**：如需长期使用，请购买正版会员
3. **合理使用**：避免频繁调用API，可能导致IP被限制
4. **文件管理**：及时整理下载的音乐文件，避免占用过多空间

## 技术栈

### 框架与核心
- **Next.js 13** - React 服务端渲染框架
- **React 18** - 用户界面库
- **TypeScript** - 类型安全的 JavaScript
- **NeteaseCloudMusicApi** - 网易云音乐API封装

### 前端技术
- **React Hooks** - 状态管理与生命周期
- **Fetch API** - 网络请求
- **JSZip** - 本地 ZIP 打包（浏览器端）
- **CSS** - Spotify 深色主题，响应式布局

### SEO 优化
- **SSR/ISR** - 服务端渲染与增量静态生成
- **JSON-LD** - 结构化数据（WebSite、MusicPlaylist、FAQPage）
- **动态 meta** - 每个页面独立的 SEO 标签
- **GTM** - Google Tag Manager 埋点

## 开发相关

### 项目结构
```
music-download/
├── pages/                # Next.js 页面与 API Routes
│   ├── index.tsx         # 首页
│   ├── search/[q].tsx    # 搜索页
│   ├── playlist/[id].tsx # 歌单详情页
│   ├── docs/             # 文档页面
│   └── api/              # API Routes
├── lib/                  # 工具库
│   └── seo.ts            # SEO 配置
├── styles/               # 样式文件
│   └── globals.css       # 全局样式
├── public/               # 静态资源
│   ├── jszip.min.js      # 本地 JSZip
│   └── remixicon.*       # 图标字体
├── next.config.js        # Next.js 配置
├── tsconfig.json         # TypeScript 配置
└── package.json          # 项目依赖
```

### 开发模式
修改代码后自动热更新（Fast Refresh）：

```bash
npm run dev
```

### API接口说明

#### 1. 搜索歌单
```
GET /api/search/playlist?keywords=关键词&limit=30&offset=0
```

#### 2. 获取歌单详情
```
GET /api/playlist/detail?id=歌单ID
```

#### 3. 获取歌曲URL
```
GET /api/song/url?ids=歌曲ID1,歌曲ID2&level=standard
```

#### 4. 获取歌曲详情
```
GET /api/song/detail?ids=歌曲ID1,歌曲ID2
```

## 更新日志

### v2.0.0 (2025-10-27) - 重大重构
- 🔥 **架构升级**：Express 静态服务 → Next.js SSR
- 🔥 **技术栈**：原生 JS → TypeScript + React
- 🔥 **路由系统**：Hash 路由 → 无 hash 路由（SEO 友好）
- ✨ **SEO 优化**：JSON-LD、动态 meta、sitemap、robots.txt
- ✨ **GTM 埋点**：集成 Google Tag Manager 事件追踪
- ✨ **文档页面**：使用教程（/docs/guide）、音质科普（/docs/quality）
- ✨ **ISR 支持**：增量静态再生成，提升性能
- ⚠️ **注意**：播放器部分功能正在完善中（进度条拖动、音量控制、上下曲切换）

### v1.0.0 (2025-10-24)
- ✨ 首次发布
- ✅ 实现歌单搜索功能
- ✅ 实现歌曲列表展示
- ✅ 实现批量下载功能
- ✅ 添加下载进度显示
- ✅ 优化界面设计

## 反馈与贡献

如有问题或建议，欢迎反馈！

---

💡 **小贴士**：第一次使用时，建议先搜索一些热门歌单（如"华语热歌榜"）测试功能。

